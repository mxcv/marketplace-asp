@model ItemDto
@inject IViewLocalizer Localizer
@{
	Debug.Assert(Model != null);
	ViewData["Title"] = Model.Title;
}

<div class="row">
	<div class="col-lg-8">
		<div class="shadow mb-4 p-4">
			@if (Model.Images == null || Model.Images.FirstOrDefault() == null)
			{
				<div class="item-image item-image-none w-100"></div>
			}
			else
			{
				<div id="image-slider" class="position-relative overflow-hidden">
					<button id="fullscreen-enter" class="btn-reset btn-fullscreen position-absolute top-0 end-0"></button>
					<button id="to-prev" class="btn-reset btn-turn position-absolute top-50 start-0 ms-2"></button>
					<button id="to-next" class="btn-reset btn-turn position-absolute top-50 end-0 me-2"></button>
					<div id="image-panel" class="d-flex overflow-hidden h-100 pb-5">
						@foreach (var image in Model.Images)
						{
							<div><img src="@image.Path"></div>
						}
					</div>
					<div id="indicator-panel" class="d-flex justify-content-center position-absolute bottom-0 w-100 pb-2"></div>
				</div>
			}
		</div>
		<div class="shadow p-4">
			<h1 class="display-4">@Model.Title</h1>
			<div class="d-flex justify-content-between mb-4">
				<span class="time-iso accurate d-none">@Model.Created.ToString("O")</span>
				<small></small>
				@if (Model.Price != null)
				{
					<h2>
						@if (Model.Currency != null)
						{
							<span class="currency-id d-none">@Model.Currency.Id</span>
						}
						<b>
							@(Model.Price.Value == 0
								? Localizer["Free"]
								: Model.Price.Value.ToString(CultureInfo.InvariantCulture))
						</b>
					</h2>
				}
			</div>
			<div class="white-space-pre-wrap">@Model.Description</div>
		</div>
	</div>
	<div class="col-lg-4 mt-4 mt-lg-0">
		<div class="shadow p-4">
			<div class="display-6 text-center mb-4">@Localizer["User"]</div>
			<div class="d-flex mb-4">
				@if (Model.User.Image == null)
				{
					<div class="rounded-circle avatar avatar-none"></div>
				}
				else
				{
					<img src="@Model.User.Image" class="rounded-circle avatar">
				}
				<div class="flex-grow-1 ms-4">
					<div><b>@Model.User.Name</b></div>
					<div>
						<small>@Localizer["Since"]</small>
						<small class="time-iso approximate d-none">@Model.User.Created.ToString("O")</small>
						<small></small>
					</div>
				</div>
			</div>
			<ul class="m-0 mb-4 p-0">
				<li class="li-icon li-phone"><span>@Model.User.PhoneNumber</span></li>
				@if (@Model.User.City != null)
				{
					<li class="li-icon li-location"><span class="city-id long d-none">@Model.User.City.Id</span><span></span></li>
				}
			</ul>
			<a asp-action="User" asp-route-id="@Model.User.Id" class="btn btn-primary w-100">@Localizer["ShowAllItems"]</a>
		</div>
	</div>
</div>

@section Styles {
	<link rel="stylesheet" href="~/css/image-slider.css" asp-append-version="true" />
}

@section Scripts {
	<script src="~/js/external-info-loader.js"></script>
	<script src="~/js/item-info-filler.js"></script>
	<script src="~/js/image-slider.js"></script>
}
